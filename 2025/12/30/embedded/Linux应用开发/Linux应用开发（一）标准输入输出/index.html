<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linux应用开发（一）标准输入输出 | wipson's Home</title><meta name="author" content="wipson"><meta name="copyright" content="wipson"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0A1428"><meta name="description" content="讲解了Linux应用开发中的标准输入输出，包括标准输入、标准输出、标准错误输出的概念和使用方法。">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux应用开发（一）标准输入输出">
<meta property="og:url" content="http://example.com/2025/12/30/embedded/Linux%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/Linux%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/index.html">
<meta property="og:site_name" content="wipson&#39;s Home">
<meta property="og:description" content="讲解了Linux应用开发中的标准输入输出，包括标准输入、标准输出、标准错误输出的概念和使用方法。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/another.jpg">
<meta property="article:published_time" content="2025-12-29T17:14:37.000Z">
<meta property="article:modified_time" content="2025-12-29T19:34:40.110Z">
<meta property="article:author" content="wipson">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="C">
<meta property="article:tag" content="应用程序开发">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/another.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Linux应用开发（一）标准输入输出",
  "url": "http://example.com/2025/12/30/embedded/Linux%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/Linux%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/",
  "image": "http://example.com/img/another.jpg",
  "datePublished": "2025-12-29T17:14:37.000Z",
  "dateModified": "2025-12-29T19:34:40.110Z",
  "author": [
    {
      "@type": "Person",
      "name": "wipson",
      "url": "http://example.com"
    }
  ]
}</script><link rel="shortcut icon" href="/img/head.jpg"><link rel="canonical" href="http://example.com/2025/12/30/embedded/Linux%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/Linux%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0A1428')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'F0F5FF')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":10,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'medium_zoom',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux应用开发（一）标准输入输出',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css" /><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div class="bg-animation" id="web_bg" style="background-image: url(/img/background.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/head.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> archives</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> tags</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> about</span></a></div></div></div></div><div class="post type-post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/another.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/head.jpg" alt="Logo"><span class="site-name">wipson's Home</span></a><a class="nav-page-title" href="/"><span class="site-name">Linux应用开发（一）标准输入输出</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> archives</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> tags</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> about</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Linux应用开发（一）标准输入输出</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-12-29T17:14:37.000Z" title="发表于 2025-12-30 01:14:37">2025-12-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-12-29T19:34:40.110Z" title="更新于 2025-12-30 03:34:40">2025-12-30</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/embedded/">embedded</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>6分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>说明：本文参考了正点原子的Linux pdf教程，相当于一个个人的学习笔记，官网链接 <a target="_blank" rel="noopener" href="http://47.111.11.73/docs/index.html">http://47.111.11.73/docs/index.html</a></p>
<h1 id="标准输入输出">标准输入输出</h1>
<h2 id="基本文件-I-O">基本文件 I/O</h2>
<p>在linux操作系统中，一切设备、进程都可以用文件来表示。掌握了基本的文件输入输出方法也就能控制板子上的各个外设了。<br>
对于一个文件，最基本的控制方法有四种，即<strong>打开、关闭、读取和写入</strong>。<br>
一般的文件读写操作如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span>  <span class="comment">// 定义了Linux系统中的一些基本类型，如 uid_t, size_t, pid_t 等</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span>   <span class="comment">// 定义了文件的状态信息</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span>      <span class="comment">// 定义了 open(), create()等操作函数</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span>     <span class="comment">// 定义了 read(), write() 等基本IO函数</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">  <span class="type">int</span> fd;</span><br><span class="line">  <span class="type">int</span> ret;</span><br><span class="line">  <span class="type">char</span> buf[<span class="number">1024</span>];</span><br><span class="line"></span><br><span class="line">  fd = open(<span class="string">&quot;./src&quot;</span>, O_RDONLY); <span class="comment">// 以只读的方式打开文件</span></span><br><span class="line">  <span class="keyword">if</span>(fd &lt; <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">  ret = read(fd, buf, <span class="keyword">sizeof</span>(buf)); <span class="comment">// 从文件读取到缓冲区</span></span><br><span class="line">  <span class="keyword">if</span>(ret &lt; <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  </span><br><span class="line">  close(fd);</span><br><span class="line"></span><br><span class="line">  fd = open(<span class="string">&quot;./src&quot;</span>, WRONLY); <span class="comment">// 以只写的方式打开文件</span></span><br><span class="line"></span><br><span class="line">  ret = write(fd, buf, <span class="keyword">sizeof</span>(buf)); <span class="comment">//将缓冲区的内容写入文件</span></span><br><span class="line">  <span class="keyword">if</span>(ret &lt; <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line"></span><br><span class="line">  close(fd);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>常用函数如下：</p>
<ul>
<li>
<p>open(), 输入文件路径和打开方式，返回文件描述符。如果描述符为负代表打开失败。<br>
常用的打开方式有下面几种。</p>
<table>
<thead>
<tr>
<th style="text-align:center">参数</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">O_RDONLY</td>
<td style="text-align:center">只读</td>
</tr>
<tr>
<td style="text-align:center">O_WRONLY</td>
<td style="text-align:center">只写</td>
</tr>
<tr>
<td style="text-align:center">O_RDWR</td>
<td style="text-align:center">可读可写</td>
</tr>
<tr>
<td style="text-align:center">O_TRUNC</td>
<td style="text-align:center">打开的同时将文件原本内容丢弃</td>
</tr>
<tr>
<td style="text-align:center">O_APPEND</td>
<td style="text-align:center">在文件末未追加</td>
</tr>
<tr>
<td style="text-align:center">O_DICTIONARY</td>
<td style="text-align:center">必须是目录</td>
</tr>
<tr>
<td style="text-align:center">O_CREAT</td>
<td style="text-align:center">如果没有则创建，但要额外传递一个mode参数</td>
</tr>
<tr>
<td style="text-align:center">O_EXCL</td>
<td style="text-align:center">没有则创建，有则返回错误</td>
</tr>
<tr>
<td style="text-align:center">O_NOFOLLOW</td>
<td style="text-align:center">不接受符号链接</td>
</tr>
</tbody>
</table>
<p>这些标志位可以单独使用，也可以使用 或（|）运算一次使用多个。<br>
如果要创建文件的话，需要一个额外的mode参数。该参数用于表示文件权限，与 chmod 命令的数值表示方法类似。如八进制 777 表示任何人可读可写可执行。</p>
</li>
<li>
<p>read(), 输入为文件描述符，缓冲区指针和读取字节数。返回值为成功读取的字节数，可能小于设定值。出错时可能返回 -1</p>
</li>
<li>
<p>write(), 输入参数为文件描述符，缓冲区指针和写入字节数。返回值为成功写入的字节数。若运行时出错可能返回 -1</p>
</li>
<li>
<p>close(), 关闭文件，输入文件描述符，关闭成功返回0，失败返回-1</p>
</li>
<li>
<p>lseek(), 用于设置文件读写指针，输入文件描述符、偏移量和一个模式，该模式的定义如下：</p>
<table>
<thead>
<tr>
<th style="text-align:center">参数</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">SEEK_SET</td>
<td style="text-align:center">从文件开头计算目标偏移量</td>
</tr>
<tr>
<td style="text-align:center">SEEK_CUR</td>
<td style="text-align:center">从当前位置计算目标偏移量</td>
</tr>
<tr>
<td style="text-align:center">SEEK_END</td>
<td style="text-align:center">从文件末尾计算目标偏移量</td>
</tr>
</tbody>
</table>
<p>返回值为函数执行后，从文件开头计算，当前指针的偏移量。<br>
需要注意的是 lseek 函数是可以让偏移量超出文件原本的大小的，这种情况被称为“空洞文件”</p>
</li>
</ul>
<h2 id="进程退出和错误处理">进程退出和错误处理</h2>
<p>linux中的各种函数基本都是在正常时返回零或一个正数，在出错时返回一个负数。linux中定义了一些常见的错误码，可以通过返回值判断错误类型。<br>
同样，每个linux进程都有一个自己的全局变量 errno ，该变量会始终记录最近一次的错误码。<br>
但是我们很难记住每一个错误码的具体含义，因此就有了 stderr 函数。该函数可以接收一个错误码，然后把它翻译成一个字符串描述。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span> <span class="comment">// stderr 定义在 string.h</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;Error:%s\n&quot;</span>, <span class="built_in">stderr</span>(errno));</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>但是这样要写好多代码，于是又有了 perror 函数，该函数可以自己去读 errno ，然后把它翻译好后打印出来。于是我们的代码可以改成：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span> <span class="comment">// perror 定义在 stdio.h</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">  perror(<span class="string">&quot;Error:&quot;</span>); <span class="comment">// 可以传一个字符串，一并进行打印</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>一般的程序返回，都会直接写 return ，但有人也可以使用 _exit() 和 _Exit() 函数，这两个函数定义在 stdlib.h ，用法和 return 一样。<br>
同时也可以使用 stdlib 中的 exit() 函数。该函数会对进程的内存清理的更加彻底。</p>
<h2 id="竞争冒险与原子操作">竞争冒险与原子操作</h2>
<p>一个文件可以被一个进程打开多次，也可以被多个进程打开。每个文件描述符拥有独立的读写指针与偏移量。如果想创建两个共享指针的描述符可以使用 dup() 或 dup2() 函数进行描述符的复制。<br>
但是，由于linux具有复杂的任务调度机制，多个进程同时访问一个文件时可能会发生错误，这被称为<strong>竞争冒险</strong>现象。<br>
解决竞争冒险现象的一个办法是<strong>原子操作</strong>。<br>
所谓原子操作，就是把许多不同的操作绑定到同一个函数中，在函数执行完之前不会进行任务切换。<br>
例如：pread() 和 pwrite() 函数，允许在读写的参数最后追加一个 offset 参数，相当于将 lseek() 函数与 read(), write() 绑定成一个原子操作。</p>
<h2 id="fcntl-与-ioctl">fcntl 与 ioctl</h2>
<p>只通过 read(), write() 两个函数有时很难满足我们对文件进行复杂操作的需求，因此也就有了 fcntl 和 ioctl 两个进阶版的文件操作函数。</p>
<ul>
<li>fnctl() 是对文件进行一些更高级的控制。需要输入一个文件描述符，一个command，还有该command对应的参数。若出错则返回-1，否则根据传入的 command 决定返回值。<br>
command 通常以 F_ 开头，如 F_GETFD, F_SETFD, F_GETFL 等。</li>
<li>ioctl() 该函数定义在&lt;sys/ioctl.h&gt;，允许用户完成各种各样的复杂操作。同样需要文件描述符和一个 command ，但操作内容会更加丰富。</li>
</ul>
<h2 id="文件的属性与其他操作">文件的属性与其他操作</h2>
<p>Linux系统中，一切皆文件。因此必须了解一些常见常用的文件属性。<br>
linux会在每个存储介质（如硬盘、SD卡）存放一张 inode 表，这个 inode 表会记录各个文件的属性以及存放地址。如下图所示：</p>
<p><img src="inode.png" alt="inode存放方式"></p>
<p>下面介绍一些常见属性：</p>
<ol>
<li>文件类型
<ul>
<li>普通文件：这种文件指的是普通的有一些硬盘上的存储信息可以访问的文件。又分为文本文件和二进制文件</li>
<li>目录文件：目录也是文件的一种，也可以使用 open() 进行打开</li>
<li>设备文件：将设备抽象成一个文件，来对它进行操作，又分为字符设备文件和块设备文件</li>
<li>符号连接文件：这是一个符号链接，真正的文件再别的地方</li>
<li>套接字文件：用于 socket 网络编程</li>
<li>管道文件：用于进程间通讯</li>
<li>…</li>
</ul>
</li>
<li>文件属主<br>
简单来说就是文件是哪个用户创建的，属于哪个用户，哪个组。<br>
可以使用命令行的 chown 接口改变文件的属主，同时在 unistd.h 中也定义了一个相同的 C 版本的 chown 函数。</li>
<li>文件访问权限<br>
文件的访问权限可以通过 chmod 命令修改。同样该命令在 &lt;sys/stat.h&gt; 有一个 C 函数版本<br>
详细来说文件访问权限分为创建者，同组用户，其他用户三种用户和可读可写可执行三种权限一共 3x3=9 项权限。<br>
编程时可以使用 unistd.h 中的 access() 函数来查看权限。传入文件路径和查看模式，返回0表示有权限，-1表示无权限。<br>
查看模式有以下几种：</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">参数</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">F_OK</td>
<td style="text-align:center">文件是否存在</td>
</tr>
<tr>
<td style="text-align:center">R_OK</td>
<td style="text-align:center">是否可读</td>
</tr>
<tr>
<td style="text-align:center">W_OK</td>
<td style="text-align:center">是否可写</td>
</tr>
<tr>
<td style="text-align:center">X_OK</td>
<td style="text-align:center">是否可执行</td>
</tr>
</tbody>
</table>
<ol start="4">
<li>文件的时间属性</li>
</ol>
<p>下面介绍一些其他的文件操作</p>
<ol>
<li>
<p>硬链接与软连接</p>
</li>
<li>
<p>文件删除</p>
</li>
<li>
<p>文件重命名</p>
</li>
<li>
<p>目录的一些操作</p>
</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">wipson</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2025/12/30/embedded/Linux%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/Linux%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/">http://example.com/2025/12/30/embedded/Linux%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/Linux%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">wipson's Home</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/linux/">linux</a><a class="post-meta__tags" href="/tags/C/">C</a><a class="post-meta__tags" href="/tags/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/">应用程序开发</a></div><div class="post-share"><div class="social-share" data-image="/img/another.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2025/12/29/signal-processing/%E7%94%B5%E7%A3%81%E7%90%86%E8%AE%BA/%E7%94%B5%E7%A3%81%E7%90%86%E8%AE%BA%EF%BC%88%E4%B8%80%EF%BC%89%E7%9F%A2%E9%87%8F%E5%88%86%E6%9E%90%E5%9F%BA%E7%A1%80/" title="电磁理论（一）矢量分析基础"><img class="cover" src="/img/hardware.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">电磁理论（一）矢量分析基础</div></div><div class="info-2"><div class="info-item-1">1.矢量分析基础 空间中具有两种场，标量场 ϕ(r)\phi(\mathbf{r})ϕ(r) 和矢量场 A(r)\mathbf{A}(\mathbf{r})A(r)，我们现在要研究这两种场在空间中的表示，以及其变化趋势。 1.1 矢量分析基础 1.1.1 拉梅系数 场的自变量是一个关于位置的矢量 r\mathbf{r}r，在三维空间中，完全表示一个位置矢量需要三个自由度，我们用三个广义坐标来表示这个位置矢量 r\mathbf{r}r,这样我们的场就可以写为一个三元函数。如果三个广义坐标分别为 u1u_1u1​, u2u_2u2​, u3u_3u3​ 那么我们的标量场就可以写作： ϕ(r)=ϕ(u1,u2,u3)(1)\phi(\mathbf{r}) = \phi(u_1, u_2, u_3) \tag{1} ϕ(r)=ϕ(u1​,u2​,u3​)(1) 同理，矢量场也可以写作 A(r)\mathbf{A}(\mathbf{r})A(r)。 如果我们把矢量场 A 在一个基坐标下分解为 A1,A2,A3A_1, A_2, A_3A1​,A2​,A3​，即 A=A1u1^+A2u2^+...</div></div></div></a></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="utterances-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/head.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">wipson</div><div class="author-info-description">Welcome to wipson’s Home! This blog shares knowledge and insights on RM hardware, embedded systems, FPGA, neural networks, and signal processing. Join me on this journey of exploration and learning in the world of technology!</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/wipsonnnn" target="_blank" title="Github"><i class="fab fa-github" style="color: #hdhfbb;"></i></a><a class="social-icon" href="mailto:18603197503@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #hdhfbb;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">博主会持续更新更多有趣的内容，欢迎关注！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA"><span class="toc-number">1.</span> <span class="toc-text">标准输入输出</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%96%87%E4%BB%B6-I-O"><span class="toc-number">1.1.</span> <span class="toc-text">基本文件 I&#x2F;O</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E9%80%80%E5%87%BA%E5%92%8C%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">1.2.</span> <span class="toc-text">进程退出和错误处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AB%9E%E4%BA%89%E5%86%92%E9%99%A9%E4%B8%8E%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C"><span class="toc-number">1.3.</span> <span class="toc-text">竞争冒险与原子操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fcntl-%E4%B8%8E-ioctl"><span class="toc-number">1.4.</span> <span class="toc-text">fcntl 与 ioctl</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9A%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E5%85%B6%E4%BB%96%E6%93%8D%E4%BD%9C"><span class="toc-number">1.5.</span> <span class="toc-text">文件的属性与其他操作</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/12/30/embedded/Linux%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/Linux%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/" title="Linux应用开发（一）标准输入输出"><img src="/img/another.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux应用开发（一）标准输入输出"/></a><div class="content"><a class="title" href="/2025/12/30/embedded/Linux%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/Linux%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/" title="Linux应用开发（一）标准输入输出">Linux应用开发（一）标准输入输出</a><time datetime="2025-12-29T17:14:37.000Z" title="发表于 2025-12-30 01:14:37">2025-12-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/29/signal-processing/%E7%94%B5%E7%A3%81%E7%90%86%E8%AE%BA/%E7%94%B5%E7%A3%81%E7%90%86%E8%AE%BA%EF%BC%88%E4%B8%80%EF%BC%89%E7%9F%A2%E9%87%8F%E5%88%86%E6%9E%90%E5%9F%BA%E7%A1%80/" title="电磁理论（一）矢量分析基础"><img src="/img/hardware.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="电磁理论（一）矢量分析基础"/></a><div class="content"><a class="title" href="/2025/12/29/signal-processing/%E7%94%B5%E7%A3%81%E7%90%86%E8%AE%BA/%E7%94%B5%E7%A3%81%E7%90%86%E8%AE%BA%EF%BC%88%E4%B8%80%EF%BC%89%E7%9F%A2%E9%87%8F%E5%88%86%E6%9E%90%E5%9F%BA%E7%A1%80/" title="电磁理论（一）矢量分析基础">电磁理论（一）矢量分析基础</a><time datetime="2025-12-28T19:07:37.000Z" title="发表于 2025-12-29 03:07:37">2025-12-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/28/others/hello-world/" title="Hello World"><img src="/img/fpga.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/2025/12/28/others/hello-world/" title="Hello World">Hello World</a><time datetime="2025-12-27T17:20:00.000Z" title="发表于 2025-12-28 01:20:00">2025-12-28</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/footer.jpg);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2019 - 2025 By wipson</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        loader: {
          load: [
            // Four font extension packages (optional)
            //- '[tex]/bbm',
            //- '[tex]/bboldx',
            //- '[tex]/dsfont',
            '[tex]/mhchem'
          ],
          paths: {
            'mathjax-newcm': '[mathjax]/../@mathjax/mathjax-newcm-font',

            //- // Four font extension packages (optional)
            //- 'mathjax-bbm-extension': '[mathjax]/../@mathjax/mathjax-bbm-font-extension',
            //- 'mathjax-bboldx-extension': '[mathjax]/../@mathjax/mathjax-bboldx-font-extension',
            //- 'mathjax-dsfont-extension': '[mathjax]/../@mathjax/mathjax-dsfont-font-extension',
            'mathjax-mhchem-extension': '[mathjax]/../@mathjax/mathjax-mhchem-font-extension'
          }
        },
        output: {
          font: 'mathjax-newcm',
        },
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
          packages: {
            '[+]': [
              'mhchem'
            ]
          }
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          menuOptions: {
            settings: {
              enrich: false  // Turn off Braille and voice narration text automatic generation
            }
          },
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }

      const script = document.createElement('script')
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax/tex-mml-chtml.min.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null
  const getUtterancesTheme = theme => theme === 'dark' ? 'photon-dark' : 'github-light'

  const loadUtterances = (el = document, key) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyUtterances = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const config = {
      src: 'https://utteranc.es/client.js',
      repo: 'wipsonnnn/wipsonnnn.github.io',
      theme: getUtterancesTheme(document.documentElement.getAttribute('data-theme')),
      crossorigin: 'anonymous',
      async: true,
      ...option,
      'issue-term': isShuoshuo ? key : (option && option['issue-term']) || 'pathname'
    }

    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => ele.setAttribute(key, value))
    el.querySelector('#utterances-wrap').appendChild(ele)
  }

  const changeUtterancesTheme = theme => {
    const iframe = document.querySelector('#utterances-wrap iframe')
    if (iframe) {
      const message = {
        type: 'set-theme',
        theme: getUtterancesTheme(theme)
      };
      iframe.contentWindow.postMessage(message, 'https://utteranc.es')
    }
  }

  btf.addGlobalFn('themeChange', changeUtterancesTheme, 'utterances')

  if (isShuoshuo) {
    'Utterances' === 'Utterances'
      ? window.shuoshuoComment = { loadComment: loadUtterances }
      : window.loadOtherComment = loadUtterances
    return
  }
  
  if ('Utterances' === 'Utterances' || !false) {
    if (false) btf.loadComment(document.getElementById('utterances-wrap'), loadUtterances)
    else loadUtterances()
  } else {
    window.loadOtherComment = loadUtterances
  }
})()</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.6" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章..." type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '1s');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><!-- hexo injector body_end end --></body></html>